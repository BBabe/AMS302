#include <vector>
#include <string>
#include <iostream>

template<typename Tx, typename Ty>
int plot(const Tx& X, const Ty& Y, const std::string& opt = std::string())
{
    if (X.size() != Y.size()) {
	std::cout << "sizes don't match !" << std::endl;
	return -1;
    }
    FILE *pipe = popen("gnuplot -persistent", "w");
    fprintf(pipe, ("plot '-' " + opt + "\n").c_str());
    for (int i=0; i<X.size(); i++)
	fprintf(pipe, "%f %f\n", X.at(i), Y.at(i));
    fflush(pipe);
}

template<typename Ty>
int plot(const Ty& Y, const std::string& opt = std::string())
{
    FILE *pipe = popen("gnuplot -persistent", "w");
    fprintf(pipe, ("plot '-' " + opt + "\n").c_str());
    for (int i=0; i<Y.size(); i++)
	fprintf(pipe, "%f\n", Y.at(i));
    fflush(pipe);
}
